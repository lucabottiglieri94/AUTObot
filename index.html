<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Agente AI per la vendita auto</title>

<style>
:root{
  --bg:#0b0f1a;
  --panel:#111827;
  --line:#1f2937;
  --text:#e5e7eb;
  --muted:#9ca3af;
  --accent:#3b82f6;
}
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:system-ui,-apple-system;
  background:var(--bg);
  color:var(--text);
}
header{
  border-bottom:1px solid var(--line);
  padding:14px 16px;
}
.brandbar{display:flex;gap:10px;flex-wrap:wrap}
.brand-btn{
  border:1px solid var(--line);
  padding:8px 14px;
  border-radius:999px;
  color:var(--text);
  text-decoration:none;
}
main{max-width:1200px;margin:auto;padding:24px 16px}
h1{font-size:26px}
.sub{color:var(--muted);margin-top:6px}
.news-grid{
  margin-top:18px;
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:14px;
}
@media(max-width:900px){.news-grid{grid-template-columns:repeat(2,1fr)}}
@media(max-width:600px){.news-grid{grid-template-columns:1fr}}
.news-card{
  border:1px solid var(--line);
  border-radius:16px;
  padding:14px;
  text-decoration:none;
  color:var(--text);
  background:var(--panel);
}
.news-title{font-weight:700}
.news-meta{font-size:12px;color:var(--muted);margin-top:6px}
.status{margin-top:10px;font-size:12px;color:var(--muted)}
.err{color:#fca5a5}
</style>
</head>

<body>

<header>
  <div class="brandbar">
    <a class="brand-btn" href="https://www.jeep-official.it/" target="_blank">JEEP</a>
    <a class="brand-btn" href="https://www.fiat.it/omni/configuratore" target="_blank">FIAT</a>
  </div>
</header>

<main>
  <h1>Agente AI per la vendita auto</h1>
  <div class="sub">Ultime news e rumors di internet sulle automotive.</div>

  <div id="news" class="news-grid">
    <div class="news-card">Caricamento…</div>
    <div class="news-card">Caricamento…</div>
    <div class="news-card">Caricamento…</div>
    <div class="news-card">Caricamento…</div>
    <div class="news-card">Caricamento…</div>
    <div class="news-card">Caricamento…</div>
  </div>

  <div id="status" class="status">stato: inizializzazione…</div>
</main>

<script>
const API = "https://auto-backend-16xa61c8w-lucas-projects-93ba30e7.vercel.app";

async function loadNews(){
  const r = await fetch(API + "/api/news", { cache: "no-store" });
  const data = await r.json();
  return data.items || [];
}

async function renderNews(){
  const box = document.getElementById("news");
  const status = document.getElementById("status");

  box.innerHTML = "";
  status.textContent = "stato: caricamento news…";

  try {
    const items = await loadNews();

    if (!items.length){
      box.innerHTML = "<div class='news-card'>Nessuna news trovata</div>";
      status.textContent = "stato: nessuna news";
      return;
    }

    for (const n of items){
      const card = document.createElement("a");
      card.className = "news-card";
      card.href = n.url;
      card.target = "_blank";
      card.rel = "noopener";
      card.textContent = n.title;
      box.appendChild(card);
    }

    status.textContent = "stato: news caricate";
  } catch (e){
    box.innerHTML = "<div class='news-card'>Errore caricamento</div>";
    status.textContent = "stato: errore";
  }
}

renderNews();
</script>


</body>
</html>
